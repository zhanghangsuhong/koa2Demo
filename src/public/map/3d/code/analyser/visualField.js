import _0x4febc2 from'../analyser.js';export default class VisualField extends _0x4febc2{constructor(_0x1fde3c,_0x1682b0){super(_0x1fde3c);this['opt']=_0x1682b0;this['analyser']();}['analyser'](){var _0x4c6823={'cUEdm':'viewer\x20is\x20required.'};if(!Cesium['defined'](this['_viewer'])){throw new Cesium['DeveloperError'](_0x4c6823['cUEdm']);}return new VisualFieldEffect(this);}}const VisualFieldEffect=class{constructor(_0x9833a0){var _0x2efc23={'dxYUG':'7|6|4|1|3|5|2|0','jCIKW':'visualFieldEffect','CyqhU':'14px\x20monospace'};var _0x9f7f0a=_0x2efc23['dxYUG']['split']('|'),_0x330a73=0x0;while(!![]){switch(_0x9f7f0a[_0x330a73++]){case'0':this['init']();continue;case'1':this['id']=Cesium['createGuid']();continue;case'2':this['state']=_0x9833a0['BEYONANALYSER_STATE']['PREPARE'];continue;case'3':this['_tip']=_0x9833a0['entitys']['add']({'id':this['id'],'label':{'name':_0x2efc23['jCIKW'],'show':![],'showBackground':!![],'font':_0x2efc23['CyqhU'],'horizontalOrigin':Cesium['HorizontalOrigin']['LEFT'],'verticalOrigin':Cesium['VerticalOrigin']['BOTTOM'],'pixelOffset':new Cesium['Cartesian2'](0xf,-0xa)}});continue;case'4':this['viewer']=_0x9833a0['_viewer'];continue;case'5':this['_shadowPrimitive']=undefined;continue;case'6':this['options']=_0x9833a0['opt'];continue;case'7':this['_that']=_0x9833a0;continue;}break;}}['init'](){var _0x427de6={'YxEaT':function(_0x38396a,_0x3d057a){return _0x38396a===_0x3d057a;},'TzsHe':'点击设定起点','AwDHs':'点击分析可视域'};var _0x24b1fb=this,_0x107ef4=_0x24b1fb['_that'],_0x5b896b=_0x24b1fb['viewer'],_0x317f4f='';_0x107ef4['handler']['setInputAction'](function(_0x2bf0d3){let _0x5d2696=_0x107ef4['mouseManager']['piTerrainToModule'](_0x2bf0d3['endPosition']);if(_0x427de6['YxEaT'](_0x24b1fb['state'],_0x107ef4['BEYONANALYSER_STATE']['END'])){_0x317f4f=_0x427de6['TzsHe'];_0x107ef4['showTip'](_0x24b1fb['_tip'],!![],_0x5d2696,_0x317f4f);}else if(_0x427de6['YxEaT'](_0x24b1fb['state'],_0x107ef4['BEYONANALYSER_STATE']['OPERATING'])){_0x24b1fb['_shadowPrimitive']['setPoseByTargetPoint'](_0x5d2696);_0x317f4f=_0x427de6['AwDHs'];_0x107ef4['showTip'](_0x24b1fb['_tip'],!![],_0x5d2696,_0x317f4f);}},Cesium['ScreenSpaceEventType']['MOUSE_MOVE']);_0x107ef4['handler']['setInputAction'](function(_0x454135){let _0xf7a42c;_0xf7a42c=_0x107ef4['mouseManager']['piTerrainToModule'](_0x454135['position']);if(!_0xf7a42c){_0xf7a42c=_0x107ef4['mouseManager']['screenToWorld'](_0x454135['position']);if(!_0xf7a42c)return![];}if(!Cesium['defined'](_0x24b1fb['_shadowPrimitive'])){_0x24b1fb['_shadowPrimitive']=new Cesium['ShadowPrimitive']({'scene':_0x5b896b['scene'],'viewerPosition':_0xf7a42c});_0x5b896b['scene']['primitives']['add'](_0x24b1fb['_shadowPrimitive']);_0x24b1fb['state']=_0x107ef4['BEYONANALYSER_STATE']['OPERATING'];}else{_0x24b1fb['state']=_0x107ef4['BEYONANALYSER_STATE']['END'];_0x107ef4['showTip'](_0x24b1fb['_tip'],![]);}},Cesium['ScreenSpaceEventType']['LEFT_CLICK']);}['remove'](){this['_shadowPrimitive']['show']=![];this['viewer']['entities']['remove'](this['_tip']);this['_tip']=undefined;}};